# Recipe Manager App - AWS Amplify Setup Guide

A full-stack recipe management application with user authentication and cloud storage.

## ğŸ—ï¸ Architecture

- **Frontend**: React + Vite
- **Authentication**: AWS Cognito (email/password)
- **Database**: DynamoDB (via Amplify Data)
- **Backend**: AWS Amplify Gen 2
- **Authorization**: Owner-based (users only see their own recipes)

## ğŸ“‹ Prerequisites

1. **Node.js** (v18 or higher)
2. **AWS Account** (free tier works!)
3. **AWS CLI** configured with credentials

## ğŸš€ Quick Start

### 1. Install Dependencies

```bash
npm install
```

### 2. Initialize Amplify Sandbox (Local Development)

```bash
npm run amplify:sandbox
```

This command:
- Creates a cloud sandbox environment
- Sets up Cognito user pool
- Creates DynamoDB tables
- Generates `amplify_outputs.json` with your configuration
- Watches for backend changes

**Keep this running in a terminal!** It's your development backend.

### 3. Start the Frontend (In a New Terminal)

```bash
npm run dev
```

Visit `http://localhost:3000`

## ğŸ¯ Features

âœ… User sign-up with email confirmation  
âœ… Secure sign-in/sign-out  
âœ… Create recipes with name, ingredients, and directions  
âœ… Search recipes by name  
âœ… Owner-based authorization (users only see their recipes)  
âœ… Responsive design  

## ğŸ“ Project Structure

```
recipe-app/
â”œâ”€â”€ amplify/
â”‚   â”œâ”€â”€ auth/resource.ts       # Cognito configuration
â”‚   â”œâ”€â”€ data/resource.ts       # DynamoDB schema
â”‚   â””â”€â”€ backend.ts             # Main backend config
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.jsx                # Main React component
â”‚   â”œâ”€â”€ App.css                # Styling
â”‚   â””â”€â”€ main.jsx               # Entry point
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ index.html
```

## ğŸ” Authentication Flow

1. **Sign Up**: User creates account with email/password
2. **Email Verification**: AWS sends confirmation email
3. **Sign In**: User logs in with verified credentials
4. **Authenticated Access**: User can create/view their recipes

## ğŸ’¾ Data Model

```typescript
Recipe {
  id: string (auto-generated)
  name: string (required)
  ingredients: string (required)
  directions: string (required)
  owner: string (auto-set by Cognito)
}
```

## ğŸŒ Deployment to Production

### Option 1: Amplify Hosting (Recommended)

1. **Push code to GitHub**

```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin YOUR_GITHUB_REPO
git push -u origin main
```

2. **Deploy via Amplify Console**

- Go to [AWS Amplify Console](https://console.aws.amazon.com/amplify/)
- Click "New app" â†’ "Host web app"
- Connect your GitHub repo
- Amplify auto-detects the Gen 2 setup
- Click "Save and deploy"

Amplify will:
- Build your React app
- Deploy backend resources (Cognito, DynamoDB)
- Provide a live URL
- Auto-deploy on git push

### Option 2: Manual Pipeline Deploy

```bash
# First deployment
npx ampx pipeline-deploy --branch main --app-id YOUR_APP_ID
```

Get `YOUR_APP_ID` from Amplify Console after connecting your repo.

## ğŸ§ª Testing Locally

1. **Start sandbox**: `npm run amplify:sandbox`
2. **Start dev server**: `npm run dev`
3. **Create an account** and verify email (check spam folder!)
4. **Create recipes** and test search

## ğŸ› ï¸ Common Issues & Solutions

### "User is not authenticated"
- Make sure sandbox is running
- Check that email is verified (check spam folder)
- Try signing out and back in

### "amplify_outputs.json not found"
- Run `npm run amplify:sandbox` first
- This file is auto-generated by Amplify

### Email not received
- Check spam/junk folder
- Verify your AWS SES is not in sandbox mode (for production)
- In sandbox mode, only verified email addresses can receive emails

### DynamoDB errors
- Ensure sandbox is running
- Check AWS CloudWatch logs in the console

## ğŸ“Š AWS Resources Created

The app creates these AWS resources:

- **Cognito User Pool** (authentication)
- **DynamoDB Table** (recipe storage)
- **AppSync API** (GraphQL data layer)
- **IAM Roles** (authorization)
- **CloudFormation Stacks** (infrastructure)

## ğŸ’° Cost Estimate

**AWS Free Tier covers**:
- 50,000 Cognito users/month
- 25 GB DynamoDB storage
- 250M AppSync queries/month

Expected cost for small usage: **$0-5/month**

## ğŸ”„ Making Backend Changes

Edit files in `amplify/` folder:

```bash
# Sandbox auto-detects changes!
# Just save the file and wait ~30 seconds
```

To add a new field to recipes:

```typescript
// amplify/data/resource.ts
Recipe: a.model({
  name: a.string().required(),
  ingredients: a.string().required(),
  directions: a.string().required(),
  prepTime: a.integer(), // NEW FIELD
})
```

## ğŸ“š Next Steps

- Add recipe categories/tags
- Add image uploads (S3)
- Add recipe sharing between users
- Add favorite/rating system
- Export recipes to PDF

## ğŸ”— Useful Links

- [Amplify Gen 2 Docs](https://docs.amplify.aws/)
- [Amplify Discord](https://discord.gg/amplify)
- [AWS Free Tier](https://aws.amazon.com/free/)

## ğŸ†˜ Need Help?

- Check [Amplify Documentation](https://docs.amplify.aws/)
- Visit [Amplify GitHub Discussions](https://github.com/aws-amplify/amplify-js/discussions)
- AWS Support (if you have a support plan)

---

**Built with â¤ï¸ using AWS Amplify Gen 2**